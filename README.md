üìå Max Bot ‚Äî –±–æ—Ç —Å PostgreSQL –∏ Docker
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –±–æ—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL.
–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é Docker –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.

üöÄ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ


–û–ø–∏—Å–∞–Ω–∏–µ


–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è


–£—Å—Ç–∞–Ω–æ–≤–∫–∞


–§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞


–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è


–ó–∞–ø—É—Å–∫ –≤ Docker


–ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ Docker)


–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã



üìå –û–ø–∏—Å–∞–Ω–∏–µ
–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ Max –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è:

–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π,

–≥—Ä—É–ø–ø,

—Å–æ–±—ã—Ç–∏–π,

–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –≥—Ä—É–ø–ø,

—Å–≤—è–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥—Ä—É–ø–ø.

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Docker, –≤–∫–ª—é—á–∞—è —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —á–µ—Ä–µ–∑ init.sql.

üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:


Python 3.10+


Docker Desktop


Git



üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞
–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:
git clone https://github.com/akseniy/Max.git
cd your-repository


üìÅ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
/project-root
‚îÇ‚îÄ‚îÄ bot.py
‚îÇ‚îÄ‚îÄ Dockerfile
‚îÇ‚îÄ‚îÄ docker-compose.yml
‚îÇ‚îÄ‚îÄ requirements.txt
‚îÇ‚îÄ‚îÄ .env
‚îÇ‚îÄ‚îÄ db_init/
‚îÇ     ‚îî‚îÄ‚îÄ init.sql
‚îÇ‚îÄ‚îÄ config/
‚îÇ     ‚îî‚îÄ‚îÄ config.py
‚îÇ‚îÄ‚îÄ handlers/
‚îÇ     ‚îî‚îÄ‚îÄ handlers.py


‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
BOT_TOKEN=your_bot_token_here

DATABASE=postgres
DB_HOST=db
DB_USER=postgres
DB_PASSWORD=root
PORT=5432


üê≥ –ó–∞–ø—É—Å–∫ –≤ Docker
1Ô∏è‚É£ –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
docker-compose up --build

Docker:


—Å–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å PostgreSQL,


–ø—Ä–∏–º–µ–Ω–∏—Ç init.sql –∏ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã,


–∑–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –±–æ—Ç–æ–º –ø–æ—Å–ª–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–∞–∑—ã.



2Ô∏è‚É£ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
docker-compose down


3Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
docker-compose up --build


üíª –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ Docker)
1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
pip install -r requirements.txt

2Ô∏è‚É£ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É:
CREATE DATABASE postgres;

–ò —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ init.sql:
psql -U postgres -d postgres -f db_init/init.sql

3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:
python bot.py


üß∞ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞:
docker logs max_bot -f

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –±–∞–∑—ã:
docker logs max_bot_db -f

–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:
docker exec -it max_bot_db psql -U postgres -d postgres

–í–æ—Ç –∫—Ä–∞—Ç–∫–∏–π –≥–∞–π–¥ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –±–æ—Ç–æ–º:

–°—Ç–∞—Ä—Ç –∏ –º–µ–Ω—é: –ù–∞–ø–∏—à–∏—Ç–µ /start –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–ü–æ–º–æ—â—å¬ª, ¬´–ì—Ä—É–ø–ø—ã¬ª –∏ ¬´–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ¬ª.

–†–∞–±–æ—Ç–∞ —Å –≥—Ä—É–ø–ø–∞–º–∏: –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ì—Ä—É–ø–ø—ã¬ª –º–æ–∂–Ω–æ –≤—Å—Ç—É–ø–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É –ø–æ –∫–æ–¥—É, –≤—ã–π—Ç–∏ –∏–∑ –≥—Ä—É–ø–ø—ã, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–∏ –≥—Ä—É–ø–ø—ã –∏–ª–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏, –µ—Å–ª–∏ –≤—ã –∞–¥–º–∏–Ω.

–°–æ–±—ã—Ç–∏—è –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –ß–µ—Ä–µ–∑ ¬´–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ¬ª –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–æ–±—ã—Ç–∏—è —Å–≤–æ–∏—Ö –≥—Ä—É–ø–ø; –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª—è—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ —Å–≤–æ–∏—Ö –≥—Ä—É–ø–ø–∞—Ö.
–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–∞–º–∏, —á—Ç–æ–±—ã –ª–µ–≥–∫–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è


